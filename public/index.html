<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STMOV Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #111;
            color: #fff;
            overflow: hidden;
        }

        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: #222;
            padding: 10px;
            border-bottom: 1px solid #444;
        }

        .title {
            font-size: 18px;
            text-align: center;
            margin-bottom: 10px;
        }

        .file-input {
            text-align: center;
        }

        .file-input input[type=file] {
            display: none;
        }

        .drop-zone {
            border: 2px dashed #555;
            border-radius: 8px;
            padding: 20px 30px;
            margin: 10px auto;
            max-width: 600px;
            text-align: center;
            background: rgba(255,255,255,0.03);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .drop-zone:hover {
            border-color: #4a9eff;
            background: rgba(74, 158, 255, 0.1);
        }

        .drop-zone.drag-over {
            border-color: #4a9eff;
            background: rgba(74, 158, 255, 0.2);
            transform: scale(1.02);
        }

        .drop-zone-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .drop-zone-text {
            font-size: 14px;
            color: #ccc;
            margin-bottom: 8px;
        }

        .drop-zone-subtext {
            font-size: 11px;
            color: #888;
            margin-bottom: 10px;
        }

        .file-select-button {
            background: #4a9eff;
            border: none;
            color: white;
            padding: 8px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .file-select-button:hover {
            background: #3a8eef;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 158, 255, 0.3);
        }

        .viewer-area {
            flex: 1;
            position: relative;
            background: #000;
        }

        #three-container {
            width: 100%;
            height: 100%;
        }

        .controls {
            background: #222;
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-top: 1px solid #444;
        }

        .control-button {
            background: #333;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .frame-step-button {
            background: #333;
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
            min-width: 36px;
        }

        .frame-step-button:hover {
            background: #555;
            transform: translateY(-1px);
        }

        .frame-step-button:active {
            transform: translateY(0);
        }

        .frame-step-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .control-button:hover {
            background: #555;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(255,255,255,0.1);
        }

        .control-button:active {
            transform: translateY(0);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .help-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #007bff;
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            z-index: 100;
            transition: all 0.2s ease;
        }

        .help-button:hover {
            background: #0056b3;
            transform: scale(1.1);
        }

        .help-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: #1a1a1a;
            border-left: 2px solid #444;
            box-shadow: -5px 0 20px rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
            transition: right 0.3s ease;
            padding: 20px;
        }

        .help-panel.open {
            right: 0;
        }

        .help-panel h2 {
            color: #fff;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #444;
        }

        .help-panel h3 {
            color: #4a9eff;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .help-panel p, .help-panel ul {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 10px;
            font-size: 13px;
        }

        .help-panel ul {
            padding-left: 20px;
        }

        .help-panel li {
            margin-bottom: 8px;
        }

        .help-panel .close-help {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #dc3545;
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }

        .help-panel .close-help:hover {
            background: #c82333;
        }

        .help-section {
            background: #222;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid #4a9eff;
        }

        .timeline {
            flex: 1;
            margin: 0 10px;
        }

        .timeline-slider {
            width: 100%;
            height: 6px;
            background: #444;
            outline: none;
            -webkit-appearance: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .timeline-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #4a9eff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .timeline-slider::-webkit-slider-thumb:hover {
            background: #fff;
            transform: scale(1.2);
        }

        .timeline-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #4a9eff;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }

        .timeline-slider::-moz-range-thumb:hover {
            background: #fff;
            transform: scale(1.2);
        }

        .time-display {
            color: #ccc;
            font-size: 12px;
            min-width: 70px;
        }

        .time-format-toggle {
            background: #333;
            border: none;
            color: #aaa;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s ease;
            margin-left: 10px;
        }

        .time-format-toggle:hover {
            background: #555;
            color: #fff;
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 1000;
        }

        .error-message {
            background: #400;
            color: #f88;
            padding: 10px;
            margin: 10px;
            border-radius: 4px;
        }

        .info {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            max-width: 200px;
        }

        .error-container {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            max-width: 600px;
            width: 90%;
        }

        .error-item {
            background: #dc3545;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
            animation: slideIn 0.3s ease;
        }

        .error-close {
            background: transparent;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0 5px;
            margin-left: 15px;
            transition: transform 0.2s ease;
        }

        .error-close:hover {
            transform: scale(1.2);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="help-button" id="help-button">?</button>

        <!-- ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚³ãƒ³ãƒ†ãƒŠ -->
        <div id="error-container" class="error-container"></div>

        <div class="header">
            <div class="title">STMOV Viewer</div>
            <div class="file-input">
                <input type="file" id="file-input" accept=".stmov,.zip" multiple>

                <!-- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã‚¾ãƒ¼ãƒ³ -->
                <div class="drop-zone" id="drop-zone">
                    <div class="drop-zone-icon">ğŸ“</div>
                    <div class="drop-zone-text">STMOVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</div>
                    <div class="drop-zone-subtext">ZIPãƒˆãƒ©ãƒƒã‚¯ï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã¾ãŸã¯å€‹åˆ¥ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆæœ€å¤§6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰</div>
                    <button class="file-select-button" id="file-select-button">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</button>
                </div>

                <div style="margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <label style="font-size: 12px;">è§£æå“è³ª:</label>
                    <select id="parse-quality" class="control-button" style="padding: 4px 8px; font-size: 12px;">
                        <option value="1">æœ€é«˜ (Ã—1) - ä½é€Ÿã€é«˜ãƒ¡ãƒ¢ãƒªä½¿ç”¨</option>
                        <option value="2">é«˜ (Ã—2) - ãƒãƒ©ãƒ³ã‚¹å‹</option>
                        <option value="4" selected>ä¸­ (Ã—4) - æ¨å¥¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰</option>
                        <option value="8">ä½ (Ã—8) - é«˜é€Ÿã€ä½ãƒ¡ãƒ¢ãƒªä½¿ç”¨</option>
                    </select>
                    <span style="font-size: 11px; color: #888;">ï¼ˆå†èª­ã¿è¾¼ã¿ã§åæ˜ ï¼‰</span>
                </div>
            </div>
        </div>

        <div class="viewer-area">
            <div id="three-container"></div>

            <div class="loading" id="loading" style="display: none;">
                <div>STMOVãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>

            <div class="info" id="info" style="display: none;">
                <div id="file-info">ãƒ•ã‚¡ã‚¤ãƒ«æœªèª­ã¿è¾¼ã¿</div>
                <div id="fps-display" style="margin-top: 10px; color: #0f0; font-weight: bold;">FPS: --</div>
                <div id="fps-note" style="margin-top: 5px; font-size: 10px; color: #888; line-height: 1.3;">ï¼ˆå†ç”Ÿã¯30fpså›ºå®šï¼‰</div>
            </div>
        </div>

        <div class="controls">
            <button class="control-button" id="play-pause" disabled>â–¶ å†ç”Ÿ</button>
            <button class="frame-step-button" id="prev-frame" disabled title="å‰ã®ãƒ•ãƒ¬ãƒ¼ãƒ  (â†)">â—€</button>
            <button class="frame-step-button" id="next-frame" disabled title="æ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ  (â†’)">â–¶</button>
            <span class="time-display" id="current-time">0</span>
            <div class="timeline">
                <input type="range" class="timeline-slider" id="timeline" min="0" max="100" value="0" disabled>
            </div>
            <span class="time-display" id="total-time">0</span>
            <button class="time-format-toggle" id="time-format-toggle" title="æ™‚é–“è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ">ãƒ•ãƒ¬ãƒ¼ãƒ </button>
            <button class="control-button" id="screenshot-btn" disabled title="ç¾åœ¨ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’PNGç”»åƒã¨ã—ã¦ä¿å­˜">ğŸ“· PNGä¿å­˜</button>
            <div style="margin-left: 20px; display: flex; align-items: center; gap: 10px;">
                <label style="font-size: 12px;">èƒŒæ™¯:</label>
                <select id="bg-color" class="control-button" style="padding: 4px 8px;">
                    <option value="black">é»’</option>
                    <option value="gray">ã‚°ãƒ¬ãƒ¼</option>
                    <option value="white">ç™½</option>
                </select>
            </div>
            <div style="margin-left: 10px; display: flex; align-items: center; gap: 10px;">
                <label style="font-size: 12px;">ã‚«ãƒ¡ãƒ©:</label>
                <select id="camera-preset" class="control-button" style="padding: 4px 8px;">
                    <option value="free">è‡ªç”±è¦–ç‚¹</option>
                    <option value="front">æ­£é¢</option>
                    <option value="side">å´é¢</option>
                    <option value="top">ä¸Šé¢</option>
                    <option value="diagonal">æ–œã‚</option>
                </select>
            </div>
            <div style="margin-left: 10px; display: flex; align-items: center; gap: 10px;">
                <label style="font-size: 12px;">æç”»è¨­å®š:</label>
                <select id="draw-interval-mode" class="control-button" style="padding: 4px 8px;">
                    <option value="auto">è‡ªå‹•</option>
                    <option value="manual">æ‰‹å‹•</option>
                </select>
                <label style="font-size: 12px;">é–“éš”:</label>
                <input type="range" id="draw-interval-slider" min="0" max="3" value="0" disabled style="width: 80px;">
                <span id="draw-interval-display" style="font-size: 12px; min-width: 30px;">Ã—1</span>
            </div>
        </div>

        <!-- ãƒ˜ãƒ«ãƒ—ãƒ‘ãƒãƒ« -->
        <div class="help-panel" id="help-panel">
            <button class="close-help" id="close-help">Ã—</button>
            <h2>ğŸ“– ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h2>

            <div class="help-section">
                <h3>ğŸ¬ åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>
                <ol>
                    <li><strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</strong>: ä¸Šéƒ¨ã®ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li><strong>ZIPãƒˆãƒ©ãƒƒã‚¯</strong>ï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã¾ãŸã¯<strong>å€‹åˆ¥ãƒ¦ãƒ‹ãƒƒãƒˆ</strong>ï¼ˆæœ€å¤§6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’é¸æŠ</li>
                    <li><strong>ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</strong>ã§ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã¾ã™</li>
                    <li><strong>â–¶ å†ç”Ÿãƒœã‚¿ãƒ³</strong>ã§å†ç”Ÿé–‹å§‹</li>
                    <li><strong>â—€ / â–¶ ãƒœã‚¿ãƒ³</strong>ã§1ãƒ•ãƒ¬ãƒ¼ãƒ ãšã¤æˆ»ã‚‹/é€²ã‚€</li>
                    <li><strong>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼</strong>ã§ã‚‚å†ç”Ÿ/ä¸€æ™‚åœæ­¢ã§ãã¾ã™</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>â±ï¸ æ™‚é–“è¡¨ç¤º</h3>
                <p>ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ¨ªã®åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã§è¡¨ç¤ºå½¢å¼ã‚’å¤‰æ›´ã§ãã¾ã™ï¼š</p>
                <ul>
                    <li><strong>ãƒ•ãƒ¬ãƒ¼ãƒ </strong>: ãƒ•ãƒ¬ãƒ¼ãƒ ç•ªå·ã§è¡¨ç¤º</li>
                    <li><strong>ç§’æ•°</strong>: ç§’æ•°ã§è¡¨ç¤º</li>
                </ul>
                <p><em>â€» 30fpså›ºå®šã®ãŸã‚ã€1ç§’ = 30ãƒ•ãƒ¬ãƒ¼ãƒ </em></p>
            </div>

            <div class="help-section">
                <h3>ğŸ“Š è§£æå“è³ª</h3>
                <p>ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿æ™‚ã®ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ã®å¯†åº¦ã‚’èª¿æ•´ã—ã¾ã™ï¼š</p>
                <ul>
                    <li><strong>æœ€é«˜ (Ã—1)</strong>: ã™ã¹ã¦ã®ç‚¹ã‚’è¡¨ç¤ºï¼ˆå‹•ä½œãŒé‡ã„ã€ãƒ¡ãƒ¢ãƒªå¤šãä½¿ç”¨ï¼‰</li>
                    <li><strong>é«˜ (Ã—2)</strong>: ç‚¹ã‚’åŠåˆ†ã«é–“å¼•ãï¼ˆãƒãƒ©ãƒ³ã‚¹å‹ï¼‰</li>
                    <li><strong>ä¸­ (Ã—4)</strong>: ç‚¹ã‚’1/4ã«é–“å¼•ãï¼ˆæ¨å¥¨è¨­å®šï¼‰</li>
                    <li><strong>ä½ (Ã—8)</strong>: ç‚¹ã‚’1/8ã«é–“å¼•ãï¼ˆè»½å¿«å‹•ä½œã€ãƒ¡ãƒ¢ãƒªç¯€ç´„ï¼‰</li>
                </ul>
                <p><em>â€» è¨­å®šå¤‰æ›´å¾Œã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„</em></p>
            </div>

            <div class="help-section">
                <h3>ğŸ“¹ ã‚«ãƒ¡ãƒ©è¦–ç‚¹</h3>
                <ul>
                    <li><strong>è‡ªç”±è¦–ç‚¹</strong>: ãƒã‚¦ã‚¹ã§è‡ªç”±ã«è¦–ç‚¹ã‚’æ“ä½œ</li>
                    <li><strong>æ­£é¢</strong>: èµ°è·¯ã‚’æ­£é¢ã‹ã‚‰è¦‹ã‚‹</li>
                    <li><strong>å´é¢</strong>: èµ°è·¯ã‚’æ¨ªã‹ã‚‰è¦‹ã‚‹</li>
                    <li><strong>ä¸Šé¢</strong>: çœŸä¸Šã‹ã‚‰ä¿¯ç°ã™ã‚‹</li>
                    <li><strong>æ–œã‚</strong>: æ–œã‚ä¸Šã‹ã‚‰å…¨ä½“ã‚’è¦‹ã‚‹</li>
                </ul>
                <p><em>è‡ªç”±è¦–ç‚¹ã§ã¯ã€ãƒã‚¦ã‚¹ãƒ‰ãƒ©ãƒƒã‚°ã§å›è»¢ã€ãƒ›ã‚¤ãƒ¼ãƒ«ã§ã‚ºãƒ¼ãƒ ã§ãã¾ã™</em></p>
            </div>

            <div class="help-section">
                <h3>ğŸ¨ èƒŒæ™¯è‰²</h3>
                <p>èƒŒæ™¯è‰²ã‚’å¤‰æ›´ã—ã¦è¦‹ã‚„ã™ã•ã‚’èª¿æ•´ã§ãã¾ã™ï¼š</p>
                <ul>
                    <li><strong>é»’</strong>: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆæ˜ã‚‹ã„ç‚¹ç¾¤è¡¨ç¤ºï¼‰</li>
                    <li><strong>ã‚°ãƒ¬ãƒ¼</strong>: ä¸­é–“çš„ãªè¦‹ã‚„ã™ã•</li>
                    <li><strong>ç™½</strong>: ç‚¹ç¾¤ãŒæ¿ƒã„èŒ¶è‰²ã«è‡ªå‹•èª¿æ•´ã•ã‚Œã€ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã‚’ç¢ºä¿</li>
                </ul>
                <p><em>â€» èƒŒæ™¯è‰²ã«å¿œã˜ã¦ç‚¹ç¾¤ã®è‰²ãŒè‡ªå‹•çš„ã«æœ€é©åŒ–ã•ã‚Œã¾ã™</em></p>
            </div>

            <div class="help-section">
                <h3>âš¡ æç”»è¨­å®š</h3>
                <p>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆãŒä½ã„å ´åˆã«èª¿æ•´ã—ã¾ã™ï¼š</p>
                <ul>
                    <li><strong>è‡ªå‹•</strong>: FPSã«å¿œã˜ã¦è‡ªå‹•ã§æç”»é–“éš”ã‚’èª¿æ•´</li>
                    <li><strong>æ‰‹å‹•</strong>: ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§æç”»é–“éš”ã‚’æ‰‹å‹•è¨­å®š
                        <ul>
                            <li>Ã—1: å…¨ãƒ•ãƒ¬ãƒ¼ãƒ æç”»ï¼ˆæœ€é«˜å“è³ªï¼‰</li>
                            <li>Ã—2: 1ãƒ•ãƒ¬ãƒ¼ãƒ ãŠãã«æç”»ï¼ˆè»½é‡ï¼‰</li>
                            <li>Ã—4: 3ãƒ•ãƒ¬ãƒ¼ãƒ ãŠãã«æç”»ï¼ˆã‚ˆã‚Šè»½é‡ï¼‰</li>
                            <li>Ã—8: 7ãƒ•ãƒ¬ãƒ¼ãƒ ãŠãã«æç”»ï¼ˆæœ€è»½é‡ï¼‰</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ“· ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆä¿å­˜</h3>
                <p>ç¾åœ¨è¡¨ç¤ºä¸­ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’PNGç”»åƒã¨ã—ã¦ä¿å­˜ã§ãã¾ã™ï¼š</p>
                <ul>
                    <li><strong>ğŸ“· PNGä¿å­˜ãƒœã‚¿ãƒ³</strong>ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¿å­˜</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ–±ï¸ ãƒã‚¦ã‚¹æ“ä½œï¼ˆè‡ªç”±è¦–ç‚¹ï¼‰</h3>
                <ul>
                    <li><strong>å·¦ãƒ‰ãƒ©ãƒƒã‚°</strong>: è¦–ç‚¹ã‚’å›è»¢</li>
                    <li><strong>ãƒ›ã‚¤ãƒ¼ãƒ«</strong>: ã‚ºãƒ¼ãƒ ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆ</li>
                    <li><strong>å³ãƒ‰ãƒ©ãƒƒã‚°</strong>: è¦–ç‚¹ã‚’å¹³è¡Œç§»å‹•</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>âŒ¨ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ</h3>
                <ul>
                    <li><strong>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼</strong>: å†ç”Ÿ/ä¸€æ™‚åœæ­¢</li>
                    <li><strong>â† (å·¦çŸ¢å°ã‚­ãƒ¼)</strong>: 1ãƒ•ãƒ¬ãƒ¼ãƒ æˆ»ã‚‹</li>
                    <li><strong>â†’ (å³çŸ¢å°ã‚­ãƒ¼)</strong>: 1ãƒ•ãƒ¬ãƒ¼ãƒ é€²ã‚€</li>
                </ul>
                <p><em>â€» å†ç”Ÿä¸­ã§ã‚‚ãƒ•ãƒ¬ãƒ¼ãƒ æ“ä½œãŒå¯èƒ½ã§ã™</em></p>
            </div>

            <div class="help-section">
                <h3>ğŸ“ˆ FPSè¡¨ç¤ºã«ã¤ã„ã¦</h3>
                <p>ç”»é¢å³ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹å®Ÿæ¸¬ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆï¼š</p>
                <ul>
                    <li><strong style="color: #0f0;">ç·‘è‰²</strong>: 30fpsä»¥ä¸Šï¼ˆå¿«é©ï¼‰</li>
                    <li><strong style="color: #ff0;">é»„è‰²</strong>: 25-30fpsï¼ˆã‚„ã‚„é‡ã„ï¼‰</li>
                    <li><strong style="color: #f00;">èµ¤è‰²</strong>: 25fpsæœªæº€ï¼ˆé‡ã„ï¼‰</li>
                </ul>
                <p><strong>â€» é‡è¦:</strong> STMOVãƒ•ã‚¡ã‚¤ãƒ«ã¯30fpså›ºå®šã§è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€é€šå¸¸ã¯30fpsã§å†ç”Ÿã•ã‚Œã¾ã™ã€‚</p>
                <ul>
                    <li><strong>å®Ÿæ¸¬FPSãŒ30fpsä»¥ä¸Šã®å ´åˆ:</strong> æç”»å‡¦ç†ã«ä½™è£•ãŒã‚ã‚Šã€æ­£å¸¸ã«30fpsã§å†ç”Ÿã•ã‚Œã¦ã„ã¾ã™</li>
                    <li><strong>å®Ÿæ¸¬FPSãŒ30fpsæœªæº€ã®å ´åˆ:</strong> æç”»ãŒé–“ã«åˆã‚ãšã€è¡¨ç¤ºã•ã‚ŒãŸæ•°å€¤ã®fpsã§å†ç”Ÿã•ã‚Œã¦ã„ã¾ã™ï¼ˆã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ï¼‰</li>
                </ul>
                <p><em>â€» å®Ÿæ¸¬FPSãŒ30fpsã‚’ä¸‹å›ã‚‹å ´åˆã¯ã€Œè§£æå“è³ªã€ã‚’ä¸‹ã’ã‚‹ã‹ã€Œæç”»è¨­å®šã€ã‚’èª¿æ•´ã—ã¦ãã ã•ã„</em></p>
            </div>
        </div>
    </div>

    <!-- Three.js (Local) -->
    <script src="vendor/three.min.js"></script>
    <script src="vendor/OrbitControls.js"></script>

    <!-- JSZip for STMOV ZIP decompression (Local) -->
    <script src="vendor/jszip.min.js"></script>

    <!-- Logger Utility (shared by all scripts) -->
    <script>
        /**
         * ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
         * é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã§ãƒ­ã‚°å‡ºåŠ›ã‚’åˆ¶å¾¡
         *
         * ã‚µãƒ¼ãƒãƒ¼ã®.envè¨­å®šï¼ˆDEBUG_MODEï¼‰ã«åŸºã¥ã„ã¦ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’è‡ªå‹•è¨­å®š
         */
        class Logger {
            static DEBUG = true;  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯trueï¼ˆã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã™ã‚‹ã¾ã§ï¼‰

            /**
             * ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰è¨­å®šã‚’å–å¾—ã—ã¦åˆæœŸåŒ–
             * ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«å‘¼ã³å‡ºã•ã‚Œã‚‹
             */
            static async init() {
                try {
                    const response = await fetch('/health');
                    const data = await response.json();

                    if (data.debugMode !== undefined) {
                        Logger.DEBUG = data.debugMode;
                        console.log(`[Logger] Debug mode: ${Logger.DEBUG ? 'ON' : 'OFF'} (from server)`);
                    }
                } catch (error) {
                    console.warn('[Logger] Failed to fetch debug mode from server, using default (DEBUG=true)');
                }
            }

            static debug(...args) {
                if (this.DEBUG) {
                    console.log('[DEBUG]', ...args);
                }
            }

            static info(...args) {
                console.log('[INFO]', ...args);
            }

            static warn(...args) {
                console.warn('[WARN]', ...args);
            }

            static error(...args) {
                console.error('[ERROR]', ...args);
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•çš„ã«ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã‚’åˆæœŸåŒ–
        Logger.init();
    </script>

    <!-- STMOV Parser -->
    <script src="js/stmov-parser.js"></script>

    <!-- Main Application -->
    <script src="js/app.js"></script>
</body>
</html>